<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Dodger: Pixel Art Space Adventure</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background-color: #001c38;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            color: #fff;
            overflow: hidden;
            background-image: 
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px),
                radial-gradient(circle at 20% 20%, #ffffff 2px, transparent 2px);
            background-size: 200vw 200vh;
            background-repeat: repeat;
            animation: twinkling 10s infinite linear;
        }

        @keyframes twinkling {
            from {
                background-position: 
                    0 0, 3300px 6900px, 1200px 2100px,
                    1500px 5500px, -1000px -3000px, 5000px -1500px,
                    -2500px 4000px, 2000px 1000px, -500px -500px,
                    3000px 2500px, 500px -2000px, -3500px -3500px,
                    4500px -4000px, -2000px -5000px, 6000px -1000px,
                    -3000px 3000px, 1000px 5000px, -4000px 1500px,
                    5500px -2500px, -1500px 0, 6500px -500px,
                    -3500px -2000px, 2500px 3500px, -4500px -4500px;
            }
            to {
                background-position: 
                    -4100px -5000px, -5500px -2500px, 7500px -2500px,
                    -6000px 500px, 8500px -2000px, -7000px -1000px,
                    9500px -3500px, -8000px 1500px, 10500px -500px,
                    -9000px 2500px, 11500px -3000px, -10000px -1500px,
                    12500px -4000px, -11000px -5000px, 13500px -2000px,
                    -12000px 0, 14500px -1000px, -13000px -2500px,
                    15500px 500px, -14000px -1500px, 16500px -500px,
                    -15000px -2000px, 17500px 1000px, -16000px -3000px;
            }
        }
                .game-container {
            text-align: center;
            position: relative;
            background-color: rgba(0, 28, 56, 0.8);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            height: 90%;
            max-width: 1000px;
            max-height: 1000px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .game-title {
            font-size: 40px;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
        }
        .score-board {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 400px;
            margin-bottom: 10px;
        }
        .score {
            font-size: 18px;
        }
        #game-canvas {
            border: 2px solid #fff;
            cursor: none;
            width: 100%;
            height: 80%;
        }
        #start-button {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: none;
            border: none;
            color: #fff;
            font-size: 24px; /* Decreased font size */
            cursor: pointer;
            text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 30px #00ffff;
            animation: glow 1.5s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from {
                text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 30px #00ffff;
            }
            to {
                text-shadow: 0 0 20px #00ffff, 0 0 30px #00ffff, 0 0 40px #00ffff;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-title">COSMIC DODGER</div>
        <div class="score-board">
            <div class="score">HIGH SCORE: <span id="high-score">0</span></div>
            <div class="score">SCORE: <span id="current-score">0</span></div>
        </div>
        <canvas id="game-canvas"></canvas>
        <button id="start-button">START</button>
    </div>

    <script>
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const highScoreElement = document.getElementById('high-score');
        const currentScoreElement = document.getElementById('current-score');
        const startButton = document.getElementById('start-button');

        let highScore = 0;
        let currentScore = 0;
        let gameSpeed = 3;
        let gameFrame = 0;
        let gameActive = false;

        // Set canvas size to a fixed aspect ratio
        function resizeCanvas() {
            const container = document.querySelector('.game-container');
            const aspectRatio = 4 / 3; // Fixed aspect ratio
            const width = container.clientWidth;
            const height = container.clientHeight;

            if (width / height > aspectRatio) {
                canvas.height = height;
                canvas.width = height * aspectRatio;
            } else {
                canvas.width = width;
                canvas.height = width / aspectRatio;
            }
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Game objects
        const rocket = {
            x: canvas.width / 2 - 15,
            y: canvas.height - 50,
            width: 30,
            height: 40,
            speed: 5
        };

        const stars = [];
        const obstacles = [];
        const planets = [
            {x: 250, y: 550, radius: 60, type: 'earth', angle: 0, speed: 0.002},
            {x: 150, y: 50, radius: 40, type: 'mars', angle: Math.PI, speed: 0.003}
        ];

        // Event listeners
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            rocket.x = e.clientX - rect.left - rocket.width / 2;
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            rocket.x = e.touches[0].clientX - rect.left - rocket.width / 2;
        });

        startButton.addEventListener('click', startGame);

        // Functions
        function drawPixelArt(x, y, pixelSize, colorArray) {
            for (let i = 0; i < colorArray.length; i++) {
                for (let j = 0; j < colorArray[i].length; j++) {
                    if (colorArray[i][j] !== 'x') {
                        ctx.fillStyle = colorArray[i][j];
                        ctx.fillRect(x + j * pixelSize, y + i * pixelSize, pixelSize, pixelSize);
                    }
                }
            }
        }

        function drawRocket() {
            const rocketPixels = [
                ['x','x','r','x','x'],
                ['x','r','R','r','x'],
                ['r','R','W','R','r'],
                ['R','W','W','W','R'],
                ['R','W','W','W','R'],
                ['x','o','x','o','x']
            ];
            const colorMap = {
                'r': '#ff6b6b',
                'R': '#ff4757',
                'W': '#ffffff',
                'o': '#feca57'
            };
            drawPixelArt(rocket.x, rocket.y, 6, rocketPixels.map(row => row.map(pixel => colorMap[pixel] || 'x')));
        }

        function drawStar(star) {
            ctx.fillStyle = star.color;
            ctx.fillRect(star.x, star.y, star.size, star.size);
        }

        function drawObstacle(obstacle) {
            if (obstacle.type === 'asteroid') {
                const asteroidPixels = [
                    ['x','g','G','x'],
                    ['g','G','G','g'],
                    ['G','G','g','G'],
                    ['x','G','g','x']
                ];
                const colorMap = {
                    'g': '#7f8c8d',
                    'G': '#95a5a6'
                };
                drawPixelArt(obstacle.x, obstacle.y, 6, asteroidPixels.map(row => row.map(pixel => colorMap[pixel] || 'x')));
            } else if (obstacle.type === 'comet') {
                const cometPixels = [
                    ['x','x','b','B','x','x'],
                    ['x','b','B','B','b','x'],
                    ['b','B','W','B','B','b'],
                    ['B','W','W','W','B','B'],
                    ['B','W','W','W','B','B'],
                    ['x','B','B','B','B','x']
                ];
                const colorMap = {
                    'b': '#48dbfb',
                    'B': '#0abde3',
                    'W': '#ffffff'
                };
                drawPixelArt(obstacle.x, obstacle.y, 6, cometPixels.map(row => row.map(pixel => colorMap[pixel] || 'x')));
            }
        }

        function drawPlanet(planet) {
            const centerX = planet.x + Math.cos(planet.angle) * 100;
            const centerY = planet.y + Math.sin(planet.angle) * 100;

            if (planet.type === 'earth') {
                const earthPixels = [
                    ['x','x','B','B','B','B','x','x'],
                    ['x','B','b','b','b','b','B','x'],
                    ['B','b','G','b','G','G','b','B'],
                    ['B','b','G','G','b','G','b','B'],
                    ['B','b','G','G','G','b','b','B'],
                    ['B','b','b','G','G','G','b','B'],
                    ['x','B','b','b','b','b','B','x'],
                    ['x','x','B','B','B','B','x','x']
                ];
                const colorMap = {
                    'B': '#2980b9',
                    'b': '#3498db',
                    'G': '#27ae60'
                };
                drawPixelArt(centerX - planet.radius, centerY - planet.radius, planet.radius / 4, earthPixels.map(row => row.map(pixel => colorMap[pixel] || 'x')));
            } else if (planet.type === 'mars') {
                const marsPixels = [
                    ['x','x','R','R','R','x','x'],
                    ['x','R','r','r','r','R','x'],
                    ['R','r','r','r','r','r','R'],
                    ['R','r','r','r','r','r','R'],
                    ['R','r','r','r','r','r','R'],
                    ['x','R','r','r','r','R','x'],
                    ['x','x','R','R','R','x','x']
                ];
                const colorMap = {
                    'R': '#c0392b',
                    'r': '#e74c3c'
                };
                drawPixelArt(centerX - planet.radius, centerY - planet.radius, planet.radius / 3.5, marsPixels.map(row => row.map(pixel => colorMap[pixel] || 'x')));
            }
        }

        function drawNebula() {
            const gradient = ctx.createRadialGradient(200, 300, 50, 200, 300, 300);
            gradient.addColorStop(0, 'rgba(155, 89, 182, 0.2)');
            gradient.addColorStop(1, 'rgba(155, 89, 182, 0)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function createStar() {
            stars.push({
                x: Math.random() * canvas.width,
                y: 0,
                size: Math.random() * 3 + 1,
                speed: Math.random() * 3 + 1,
                color: `rgb(${Math.random() * 100 + 155}, ${Math.random() * 100 + 155}, ${Math.random() * 55 + 200})`
            });
        }

        function createObstacle() {
            const isComet = Math.random() < 0.3; // Increased chance of spawning a comet
            obstacles.push({
                x: Math.random() * (canvas.width - (isComet ? 36 : 24)),
                y: 0,
                width: isComet ? 36 : 24,
                height: isComet ? 36 : 24,
                speed: isComet ? gameSpeed * 1.5 : gameSpeed,
                type: isComet ? 'comet' : 'asteroid'
            });
        }

        function updateGameState() {
            if (!gameActive) return;

            // Update stars
            for (let i = stars.length - 1; i >= 0; i--) {
                stars[i].y += stars[i].speed;
                if (stars[i].y > canvas.height) {
                    stars.splice(i, 1);
                }
            }

            // Update obstacles
            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].y += obstacles[i].speed;
                if (obstacles[i].y > canvas.height) {
                    obstacles.splice(i, 1);
                    currentScore++;
                    currentScoreElement.textContent = currentScore;
                    if (currentScore > highScore) {
                        highScore = currentScore;
                        highScoreElement.textContent = highScore;
                    }
                }

                // Check collision
                if (
                    rocket.x < obstacles[i].x + obstacles[i].width &&
                    rocket.x + rocket.width > obstacles[i].x &&
                    rocket.y < obstacles[i].y + obstacles[i].height &&
                    rocket.y + rocket.height > obstacles[i].y
                ) {
                    gameOver();
                }
            }

            // Update planet positions
            planets.forEach(planet => {
                planet.angle += planet.speed;
            });

            // Increase difficulty
            if (gameFrame % 300 === 0) { // Increased difficulty ramp-up
                gameSpeed += 0.5;
            }
        }

        function gameOver() {
            gameActive = false;
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#ffffff';
            ctx.font = '48px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText('GAME OVER!', canvas.width / 2, canvas.height / 2);
            startButton.style.display = 'block';
        }

        function startGame() {
            currentScore = 0;
            gameSpeed = 10; // Increased initial game speed
            gameFrame = 0;
            obstacles.length = 0;
            currentScoreElement.textContent = currentScore;
            gameActive = true;
            startButton.style.display = 'none';
            gameLoop();
        }

        function gameLoop() {
            ctx.fillStyle = '#001c38';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawNebula();
            planets.forEach(drawPlanet);

            if (gameFrame % 10 === 0) createStar();
            stars.forEach(drawStar);

            if (gameActive && gameFrame % 40 === 0) createObstacle(); // Increased obstacle spawn rate
            obstacles.forEach(drawObstacle);

            drawRocket();
            updateGameState();

            gameFrame++;
            if (gameActive) {
                requestAnimationFrame(gameLoop);
            }
        }

        // Initial setup
        planets.forEach(drawPlanet);
        drawNebula();
        drawRocket();
    </script>
</body>
</html>
